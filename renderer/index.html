<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arc Notion Sidebar</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-dark">
  <div id="app-wrap">
    <div id="sidebar">
      <header id="sidebar-header" class="drag-region">
        <span id="sidebar-title">Arc Notion Sidebar</span>
        <div id="header-actions">
          <button id="settingsBtn" type="button" title="Settings">&#9881;</button>
          <button id="debugToggle" type="button" title="Toggle Debug">▼ Debug</button>
        </div>
      </header>

      <section id="schedule-section">
        <div class="schedule-header-row">
          <div id="schedule-header">Schedule</div>
          <button type="button" id="schedule-refresh-btn" class="schedule-refresh-btn" title="Refresh schedule from Notion">↻</button>
        </div>
        <div id="schedule-date" class="schedule-date"></div>
        <div id="schedule-meetings-wrap" class="schedule-list-wrap">
          <div class="schedule-subtitle"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="3" width="12" height="11" rx="1"/><path d="M2 6h12M5 1v2M11 1v2"/></svg></span>Meetings</div>
          <ul id="schedule-meetings"></ul>
        </div>
        <div id="schedule-tasks-wrap" class="schedule-list-wrap">
          <div class="schedule-subtitle"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 4h3v3H2zM7 4h7M7 8h7M7 12h4"/><path d="M2 5.5l1.5 1.5L6 4" stroke-linecap="round" stroke-linejoin="round"/></svg></span>Tasks</div>
          <ul id="schedule-tasks"></ul>
        </div>
        <section id="schedule-projects-section" class="schedule-block-projects" aria-label="Projects">
          <div id="schedule-projects-wrap" class="schedule-list-wrap">
            <div class="schedule-subtitle"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 4h5v9H2zM7 4h7l2 2v7H7V4z"/></svg></span>Projects</div>
            <div id="schedule-projects"></div>
          </div>
        </section>
        <div id="schedule-upcoming-wrap" class="schedule-upcoming-wrap hidden">
          <div class="schedule-subtitle schedule-upcoming-title"><span class="schedule-icon" aria-hidden="true">⏰</span>Upcoming</div>
          <ul id="schedule-upcoming"></ul>
        </div>
        <div id="schedule-empty" class="schedule-empty hidden">Connect Notion in Settings to see your schedule.</div>
      </section>

      <section id="debug-panel" class="collapsed">
        <div id="debug-status">
          <span id="debug-last-status">—</span>
          <span id="debug-last-error" class="hidden">—</span>
        </div>
        <div id="debug-actions">
          <button id="debug-copy" type="button">Copy logs</button>
          <button id="debug-clear" type="button">Clear</button>
        </div>
        <pre id="debug-log"></pre>
      </section>
    </div>

    <aside id="arc-panel">
      <header id="arc-panel-header" title="Expand / collapse Arc">
        <span id="arc-panel-title">Arc</span>
        <span id="arc-panel-chevron" aria-hidden="true">▶</span>
      </header>
      <div id="arc-panel-body">
        <main id="messages-wrap">
          <div id="messages"></div>
        </main>
        <footer id="input-wrap">
          <input id="input" type="text" placeholder="ask me anything" autocomplete="off" />
          <button id="sendBtn" type="button" title="Send">▶</button>
        </footer>
      </div>
    </aside>
  </div>

  <div id="settingsModal" class="hidden">
    <div class="modalInner">
      <h3>Settings</h3>
      <label>Anthropic API Key</label>
      <input id="apiKeyInput" placeholder="Paste your Anthropic key" />
      <label>Anthropic-Version (optional)</label>
      <input id="anthropicVersionInput" placeholder="e.g. 2024-04-01" />
      <label>Anthropic Model (optional)</label>
      <input id="anthropicModelInput" placeholder="e.g. claude-3-5-sonnet-20241022 (livelier) or claude-3-haiku-20240307 (faster)" />
      <label>Slack Webhook URL (optional)</label>
      <input id="slackWebhookInput" placeholder="https://hooks.slack.com/services/..." />
      <label>Voice</label>
      <select id="voiceSelect"></select>
      <label>Rate <span id="rateVal">1.0</span></label>
      <input id="rateInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Pitch <span id="pitchVal">1.0</span></label>
      <input id="pitchInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Volume <span id="volumeVal">1.0</span></label>
      <input id="volumeInput" type="range" min="0" max="1" step="0.1" value="1" />
      <button id="testVoice">Test Voice</button>
      <div class="modalActions">
        <button id="saveApiKey">Save</button>
        <button id="clearHistory">Clear History</button>
        <button id="closeSettings">Close</button>
        <button id="probeApi">Probe API</button>
      </div>
      <div id="settingsStatus"></div>
      <pre id="probeResult" class="hidden"></pre>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
