<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LittleBot</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <div id="bot">
      <!-- Arc Reactor / JARVIS HUD orb — ULTRA THIN + SLOWED WAY DOWN (transparent)
           Changes:
           - Ring spins: 28s / 20s / 24s
           - Core pulses: 6.5s / 10s
           - Particle orbits: ~10–18s
           - Twinkle: 8–12s
      -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" aria-label="Arc Reactor HUD (ultra thin, slow)">
        <defs>
          <radialGradient id="gCore" cx="50%" cy="50%" r="55%">
            <stop offset="0%"  stop-color="#ffffff" stop-opacity="1"/>
            <stop offset="18%" stop-color="#eaffff" stop-opacity="0.92"/>
            <stop offset="42%" stop-color="#7cf3ff" stop-opacity="0.60"/>
            <stop offset="100%" stop-color="#00c8ff" stop-opacity="0"/>
          </radialGradient>

          <radialGradient id="gHot" cx="48%" cy="46%" r="40%">
            <stop offset="0%"  stop-color="#ffffff" stop-opacity="1"/>
            <stop offset="35%" stop-color="#ffffff" stop-opacity="0.55"/>
            <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
          </radialGradient>

          <linearGradient id="gRing" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00d6ff" stop-opacity="0.95"/>
            <stop offset="55%" stop-color="#7cf3ff" stop-opacity="0.90"/>
            <stop offset="100%" stop-color="#2a6bff" stop-opacity="0.90"/>
          </linearGradient>

          <linearGradient id="gRing2" x1="0%" y1="100%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#2a6bff" stop-opacity="0.55"/>
            <stop offset="50%" stop-color="#00d6ff" stop-opacity="0.80"/>
            <stop offset="100%" stop-color="#ffffff" stop-opacity="0.18"/>
          </linearGradient>

          <radialGradient id="gParticle" cx="50%" cy="50%" r="60%">
            <stop offset="0%" stop-color="#ffffff" stop-opacity="0.95"/>
            <stop offset="45%" stop-color="#7cf3ff" stop-opacity="0.65"/>
            <stop offset="100%" stop-color="#00bfff" stop-opacity="0"/>
          </radialGradient>

          <filter id="fGlow" x="-160%" y="-160%" width="420%" height="420%">
            <feGaussianBlur stdDeviation="3.8" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>

          <filter id="fBloom" x="-170%" y="-170%" width="440%" height="440%">
            <feGaussianBlur stdDeviation="16" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>

          <filter id="fSpark" x="-190%" y="-190%" width="480%" height="480%">
            <feGaussianBlur stdDeviation="2.4" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>

          <clipPath id="clipCore">
            <circle cx="256" cy="256" r="78"/>
          </clipPath>

          <path id="o1" d="M256,256 m-46,0 a46,34 0 1,0 92,0 a46,34 0 1,0 -92,0"/>
          <path id="o2" d="M256,256 m-30,0 a30,54 0 1,0 60,0 a30,54 0 1,0 -60,0"/>
          <path id="o3" d="M256,256 m-62,0 a62,48 0 1,0 124,0 a62,48 0 1,0 -124,0"/>
        </defs>

        <style>
          .spinSlow { transform-origin: 256px 256px; animation: spin 28s linear infinite; }
          .spinFast { transform-origin: 256px 256px; animation: spin 20s linear reverse infinite; }
          .spinMid  { transform-origin: 256px 256px; animation: spin 24s linear infinite; opacity:.82; }

          .pulse    { transform-origin: 256px 256px; animation: pulse 6.5s ease-in-out infinite; }
          .pulse2   { transform-origin: 256px 256px; animation: pulse2 10s ease-in-out infinite; }

          .tw       { animation: tw 8s ease-in-out infinite; }
          .tw2      { animation: tw 12s ease-in-out infinite; }

          @keyframes spin { to { transform: rotate(360deg); } }
          @keyframes pulse { 0%,100%{ transform:scale(1); opacity:.78 } 50%{ transform:scale(1.06); opacity:.92 } }
          @keyframes pulse2{ 0%,100%{ transform:scale(1); opacity:.20 } 50%{ transform:scale(1.10); opacity:.38 } }
          @keyframes tw { 0%,100%{ opacity:.18 } 50%{ opacity:.60 } }

          @media (prefers-reduced-motion: reduce){
            .spinSlow,.spinFast,.spinMid,.pulse,.pulse2,.tw,.tw2{ animation:none !important; }
          }
        </style>

        <!-- Outer rings (hairline) -->
        <g filter="url(#fGlow)" style="mix-blend-mode:screen">
          <g class="spinSlow">
            <circle cx="256" cy="256" r="150" fill="none" stroke="url(#gRing)" stroke-width="1.15"
                    stroke-linecap="round" stroke-dasharray="42 18 18 14 30 22 16 16" opacity="0.60"/>
            <circle cx="256" cy="256" r="164" fill="none" stroke="#bdf7ff" stroke-width="0.55"
                    stroke-linecap="round" stroke-dasharray="2 16" opacity="0.26"/>
          </g>

          <g class="spinFast">
            <circle cx="256" cy="256" r="122" fill="none" stroke="url(#gRing2)" stroke-width="0.95"
                    stroke-linecap="round" stroke-dasharray="30 16 10 14 24 20 8 12" opacity="0.70"/>
            <circle cx="256" cy="256" r="110" fill="none" stroke="#7cf3ff" stroke-width="0.45"
                    stroke-linecap="round" stroke-dasharray="1 10" opacity="0.20"/>
          </g>

          <g class="spinMid">
            <circle cx="256" cy="256" r="92" fill="none" stroke="#ffffff" stroke-width="0.40"
                    stroke-linecap="round" stroke-dasharray="10 10 2 14 6 12 2 18" opacity="0.22"/>
          </g>
        </g>

        <!-- Core bloom -->
        <g filter="url(#fBloom)" style="mix-blend-mode:screen">
          <g class="pulse2">
            <circle cx="256" cy="256" r="108" fill="url(#gCore)" opacity="0.22"/>
            <circle cx="256" cy="256" r="86"  fill="url(#gCore)" opacity="0.28"/>
            <circle cx="256" cy="256" r="64"  fill="url(#gCore)" opacity="0.34"/>
          </g>
        </g>

        <!-- Center lens + nucleus (hairline) -->
        <g filter="url(#fGlow)" style="mix-blend-mode:screen">
          <circle cx="256" cy="256" r="78" fill="none" stroke="#ffffff" stroke-width="0.55" opacity="0.16"/>
          <circle cx="256" cy="256" r="72" fill="none" stroke="#7cf3ff" stroke-width="0.45" opacity="0.14"/>

          <g class="pulse">
            <circle cx="256" cy="256" r="46" fill="url(#gCore)" opacity="0.78"/>
            <circle cx="256" cy="256" r="32" fill="url(#gHot)" opacity="0.95"/>
            <circle cx="256" cy="256" r="12" fill="#ffffff" opacity="0.22"/>
          </g>
        </g>

        <!-- Swirling particles (slow) -->
        <g clip-path="url(#clipCore)" filter="url(#fSpark)" style="mix-blend-mode:screen">
          <circle cx="256" cy="256" r="80" fill="url(#gCore)" opacity="0.16"/>

          <circle r="2.8" fill="url(#gParticle)" class="tw">
            <animateMotion dur="12s" repeatCount="indefinite" rotate="auto">
              <mpath href="#o1"/>
            </animateMotion>
          </circle>
          <circle r="2.0" fill="url(#gParticle)" opacity="0.68" class="tw2">
            <animateMotion dur="18s" repeatCount="indefinite" rotate="auto" keyPoints="0.35;1" keyTimes="0;1" calcMode="linear">
              <mpath href="#o1"/>
            </animateMotion>
          </circle>

          <circle r="2.4" fill="url(#gParticle)" opacity="0.55" class="tw">
            <animateMotion dur="14s" repeatCount="indefinite" rotate="auto">
              <mpath href="#o2"/>
            </animateMotion>
          </circle>
          <circle r="1.7" fill="#ffffff" opacity="0.40">
            <animateMotion dur="10s" repeatCount="indefinite" rotate="auto" keyPoints="0.55;1" keyTimes="0;1" calcMode="linear">
              <mpath href="#o2"/>
            </animateMotion>
          </circle>

          <circle r="1.6" fill="#ffffff" opacity="0.36">
            <animateMotion dur="11s" repeatCount="indefinite" rotate="auto">
              <mpath href="#o3"/>
            </animateMotion>
          </circle>
          <circle r="1.1" fill="#7cf3ff" opacity="0.24">
            <animateMotion dur="16s" repeatCount="indefinite" rotate="auto" keyPoints="0.2;1" keyTimes="0;1" calcMode="linear">
              <mpath href="#o3"/>
            </animateMotion>
          </circle>
        </g>
      </svg>
    </div>

    <div id="panel">
      <div id="messages"></div>
      <div id="controls">
        <input id="input" placeholder="Ask me anything..." autocomplete="off" />
        <button id="send" title="Send">→</button>
        <button id="settingsBtn" title="Settings">⚙️</button>
      </div>
    </div>
  </div>

  <div id="settingsModal" class="hidden">
    <div class="modalInner">
      <h3>Settings</h3>
      <label>Anthropic API Key</label>
      <input id="apiKeyInput" placeholder="Paste your Anthropic key" />
      <label>Anthropic-Version (optional)</label>
      <input id="anthropicVersionInput" placeholder="e.g. 2024-04-01" />
      <label>Anthropic Model (optional)</label>
      <input id="anthropicModelInput" placeholder="e.g. claude-sonnet-4-5-20250929" />
      <label>Voice</label>
      <select id="voiceSelect"></select>
      <label>Rate <span id="rateVal">1.0</span></label>
      <input id="rateInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Pitch <span id="pitchVal">1.0</span></label>
      <input id="pitchInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Volume <span id="volumeVal">1.0</span></label>
      <input id="volumeInput" type="range" min="0" max="1" step="0.1" value="1" />
      <button id="testVoice">Test Voice</button>
      <div class="modalActions">
        <button id="saveApiKey">Save</button>
        <button id="clearHistory">Clear History</button>
        <button id="closeSettings">Close</button>
        <button id="probeApi">Probe API</button>
      </div>
      <div id="settingsStatus"></div>
      <pre id="probeResult" class="hidden"></pre>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
