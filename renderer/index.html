<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arc Notion Sidebar</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-dark">
  <div id="app-wrap">
    <div id="sidebar">
      <div id="conflict-banner" class="conflict-banner hidden" role="alert" aria-live="polite">
        <div class="conflict-banner-text">
          <span class="conflict-banner-title">Schedule conflict</span>
          <span id="conflict-banner-detail" class="conflict-banner-detail"></span>
        </div>
        <div class="conflict-banner-actions">
          <select id="conflict-meeting-select" class="conflict-meeting-select" aria-label="Select meeting to resolve"></select>
          <button id="conflict-resolve-btn" type="button" class="conflict-resolve-btn">Resolve</button>
        </div>
      </div>
      <header id="sidebar-header" class="drag-region sidebar-header">
        <span id="sidebar-title">Notion Sidebar</span>
        <div id="header-actions">
          <button id="settingsBtn" type="button" title="Settings" class="icon-btn" aria-label="Settings">&#9881;</button>
        </div>
      </header>

      <section id="schedule-section" class="schedule-section" aria-label="Schedule">
        <div class="schedule-header-row">
          <h2 id="schedule-header" class="schedule-heading">Schedule</h2>
          <button type="button" id="schedule-refresh-btn" class="schedule-refresh-btn" title="Refresh schedule from Notion" aria-label="Refresh schedule">â†»</button>
        </div>
        <p id="schedule-date" class="schedule-date"></p>
        <div id="schedule-upcoming-wrap" class="schedule-upcoming-wrap hidden">
          <ul id="schedule-upcoming"></ul>
        </div>
        <div id="schedule-meetings-wrap" class="schedule-list-wrap schedule-block">
          <div class="schedule-subtitle schedule-subtitle-with-add">
            <span class="schedule-subtitle-label"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg></span>Meetings</span>
            <button type="button" class="schedule-add-btn" id="add-meeting-btn" title="Add meeting">+ Add</button>
          </div>
          <div id="add-meeting-form" class="schedule-add-form hidden">
            <input type="text" id="add-meeting-title" placeholder="Meeting title" />
            <input type="date" id="add-meeting-date" />
            <input type="text" id="add-meeting-time" placeholder="Start time (e.g. 2:30 PM)" />
            <label class="schedule-add-label">Duration (minutes)</label>
            <input type="number" id="add-meeting-duration" min="5" max="480" step="5" value="60" title="Duration in minutes" aria-label="Duration in minutes" />
            <div class="schedule-add-actions">
              <button type="button" class="schedule-add-submit" id="add-meeting-submit">Add</button>
              <button type="button" class="schedule-add-cancel" id="add-meeting-cancel">Cancel</button>
            </div>
          </div>
          <ul id="schedule-meetings"></ul>
        </div>
        <div id="schedule-tasks-wrap" class="schedule-list-wrap schedule-block">
          <div class="schedule-subtitle schedule-subtitle-with-add">
            <span class="schedule-subtitle-label"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg></span>Tasks</span>
            <button type="button" class="schedule-add-btn" id="add-task-btn" title="Add task">+ Add</button>
          </div>
          <div id="add-task-form" class="schedule-add-form hidden">
            <input type="text" id="add-task-title" placeholder="Task title" />
            <div class="schedule-add-actions">
              <button type="button" class="schedule-add-submit" id="add-task-submit">Add</button>
              <button type="button" class="schedule-add-cancel" id="add-task-cancel">Cancel</button>
            </div>
          </div>
          <ul id="schedule-tasks"></ul>
        </div>
        <section id="schedule-projects-section" class="schedule-block-projects schedule-block" aria-label="Projects">
          <div id="schedule-projects-wrap" class="schedule-list-wrap">
            <div class="schedule-subtitle schedule-subtitle-with-add">
              <span class="schedule-subtitle-label"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></svg></span>Projects</span>
              <button type="button" class="schedule-add-btn" id="add-project-btn" title="Add project">+ Add</button>
            </div>
            <div id="add-project-form" class="schedule-add-form hidden">
              <input type="text" id="add-project-title" placeholder="Project title" />
              <div class="schedule-add-actions">
                <button type="button" class="schedule-add-submit" id="add-project-submit">Add</button>
                <button type="button" class="schedule-add-cancel" id="add-project-cancel">Cancel</button>
              </div>
            </div>
            <div id="schedule-projects"></div>
          </div>
        </section>
        <section id="schedule-completed-section" class="schedule-block-completed schedule-block hidden" aria-label="Completed">
          <div class="schedule-list-wrap">
            <div class="schedule-subtitle schedule-subtitle-with-add">
              <span class="schedule-subtitle-label"><span class="schedule-icon" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg></span>Completed</span>
              <button type="button" class="completed-toggle" id="completed-toggle-btn" aria-expanded="false">Show</button>
            </div>
            <div id="schedule-completed"></div>
          </div>
        </section>
        <p id="schedule-empty" class="schedule-empty hidden">Connect Notion in Settings to see your schedule.</p>
      </section>

    </div>

  </div>

  <div id="settingsModal" class="hidden">
    <div class="modalInner">
      <h3>Settings</h3>
      <label>Anthropic API Key</label>
      <input id="apiKeyInput" placeholder="Paste your Anthropic key" />
      <label>Anthropic-Version (optional)</label>
      <input id="anthropicVersionInput" placeholder="e.g. 2024-04-01" />
      <label>Anthropic Model (optional)</label>
      <input id="anthropicModelInput" placeholder="e.g. claude-3-5-sonnet-20241022 (livelier) or claude-3-haiku-20240307 (faster)" />
      <label>Slack Webhook URL (optional)</label>
      <input id="slackWebhookInput" placeholder="https://hooks.slack.com/services/..." />
      <label>Voice</label>
      <select id="voiceSelect"></select>
      <label>Rate <span id="rateVal">1.0</span></label>
      <input id="rateInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Pitch <span id="pitchVal">1.0</span></label>
      <input id="pitchInput" type="range" min="0.5" max="2" step="0.1" value="1" />
      <label>Volume <span id="volumeVal">1.0</span></label>
      <input id="volumeInput" type="range" min="0" max="1" step="0.1" value="1" />
      <button id="testVoice">Test Voice</button>
      <div class="modalActions">
        <button id="saveApiKey">Save</button>
        <button id="clearHistory">Clear History</button>
        <button id="closeSettings">Close</button>
        <button id="probeApi">Probe API</button>
      </div>
      <div id="settingsStatus"></div>
      <pre id="probeResult" class="hidden"></pre>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
